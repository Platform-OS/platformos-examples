---
slug: programmers/with_companies_1
layout_name: application
metadata:
  full_width: true
---
{% include 'modules/n_plus_one/menu' %}

{% assign _start = "now" | to_time %}

{% graphql g = 'modules/n_plus_one/n1_es_programmers' %}

{% assign _graph = "now" | to_time %}

<h2>Programmers + Companies: Slow</h2>

<table class="table table-bordered table-striped scroll">
  <thead>
    <tr><th colspan="5"> programmers [{{ g.programmers.results | size }}/{{ g.programmers.total_entries }}] </th> </tr>
    <tr>
      <th>id</th>
      <th>name</th>
      <th>email</th>
      <th>title</th>
      <th>company_name</th>
      <th>company_description</th>
    </tr>
  </thead>
  <tbody>
    {% for programmer in g.programmers.results %}
      <tr>
        <td> {{ programmer.id }} </td>
        <td> {{ programmer.name }} </td>
        <td> {{ programmer.email }} </td>
        <td> {{ programmer.title }} </td>
        {% if programmer.company_id %}
          {% graphql company = "modules/n_plus_one/n1_company", id: programmer.company_id %}
          <td> {{ programmer.company_id }} {{ company.companies.results.first.name }} </td>
          <td> {{ company.companies.results.first.description }} </td>
        {% endif  %}
      </tr>
    {% endfor %}
  </tbody>
</table>

{% assign _render = "now" | to_time %}

{% assign _graph_duration = _start | time_diff: _graph | round %}
{% assign _render_duration = _start | time_diff: _render | round %}

{% log _graph_duration, type: "[N+1] benchmark-graph" %}
{% log _render_duration, type: "[N+1] benchmark-render" %}

{% include 'modules/n_plus_one/benchmark-report' %}
