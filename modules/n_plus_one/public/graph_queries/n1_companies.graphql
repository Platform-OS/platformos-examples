query companies($ids: [ID!], $limit: Int = 200, $timezone: String, $city: String) {
  companies: models(
    per_page: $limit
    filter: {
      name: {
        value: "modules/n_plus_one/company"
      }
      id: { value_in: $ids }
      properties: [
        { name: "timezone", value: $timezone }
        { name: "city",  value: $city }
      ]
    }
  ) {
    total_entries
    results {
      properties
      id
      name

      products: models(
        join_on_property: "id"
        foreign_property: "company_id"
        model_name: "modules/n_plus_one/product"
      ){
        properties
      }
    }
  }
}
